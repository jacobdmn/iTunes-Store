<style>
  * {
    margin: 0;
  }
</style>
<script
  type="text/javascript"
  src="../../node_modules/vis-network/dist/vis-network.min.js"
></script>
<div id="mynetwork" style="background-color: #666666e8"></div>

<script type="text/javascript">
  // create an array with nodes
  var data = [
    {
      trackId: 511,
      trackName: "so am i",
      albumId: 51,
      albumName: "mix",
      artistId: 5,
      artistName: "Ava max",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 111,
      trackName: "so am i",
      albumId: 11,
      albumName: "mix",
      artistId: 1,
      artistName: "Ava max",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 114,
      trackName: "so am i",
      albumId: 11,
      albumName: "mix",
      artistId: 1,
      artistName: "Ava max",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 113,
      trackName: "so am i",
      albumId: 11,
      albumName: "mix",
      artistId: 1,
      artistName: "Ava max",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 112,
      trackName: "xaxaxa",
      albumId: 12,
      albumName: "mix2",
      artistId: 1,
      artistName: "Ava max",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 211,
      trackName: "who me",
      albumId: 21,
      albumName: "mixJacob",
      artistId: 2,
      artistName: "jacob",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 221,
      trackName: "who me",
      albumId: 22,
      albumName: "mixJacob",
      artistId: 2,
      artistName: "jacob",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 231,
      trackName: "who me",
      albumId: 23,
      albumName: "mixJacob",
      artistId: 2,
      artistName: "jacob",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 311,
      trackName: "kings ticks",
      albumId: 31,
      albumName: "mix3",
      artistId: 3,
      artistName: "Justen",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
    {
      trackId: 411,
      trackName: "babababa",
      albumId: 41,
      albumName: "mikoo11",
      artistId: 4,
      artistName: "4444",
      trackImage:
        "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/c6/9f/58/c69f58ef-d208-93cb-dc9d-e9df87a76862/source/60x60bb.jpg",
    },
  ];

  /// initialize our new arrays
  let artists = [],
    albums = [],
    songs = [];

  /// get needed data and set it into arrays
  data.map(
    (
      {
        trackId,
        trackName,
        trackImage,
        albumId,
        albumName,
        artistId,
        artistName,
      },
      index
    ) => {
      artists = [
        ...artists,
        {
          id: artistId,
          label: artistName,
          fixed: true,
          font: { size: 25 },
          // widthConstraint: 300,
        },
      ];
      albums = [
        ...albums,
        {
          id: albumId,
          label: albumName,
          from: albumId, /// just to be more readile
          to: artistId,
          shape: "circle",
          font: { size: 20 },
          margin: 2,
        },
      ];
      songs = [
        ...songs,
        {
          id: trackId,
          label: trackName,
          from: trackId,
          to: albumId,
          shape: "circularImage",
          image: trackImage,
          font: { size: 17 },
        },
      ];
    }
  );

  const unique = (ARR = [], KEY) => [
    ...new Map(ARR.map((item) => [item[KEY], item])).values(),
  ];

  //// returns unique elements in the arrays
  artists = unique(artists, "id");
  albums = unique(albums, "id");
  /// console log them

  console.log(artists);
  console.log(albums);
  console.log(songs);

  /// initialize nodes and edges for network
  var nodes = new vis.DataSet([...artists, ...albums, ...songs]);

  /// deleting the label value to avoid repeating

  let edgesValueWithoutLabel = [];

  [albums, songs].forEach((node) => {
    node.forEach((el, index) => {
      let { from, to } = el;
      edgesValueWithoutLabel = [
        ...edgesValueWithoutLabel,
        {
          from,
          to,
          // width: 1 === 2 ? 4 * index : 3,
        },
      ];
    });
  });
  console.log(edgesValueWithoutLabel);
  var edges = new vis.DataSet(edgesValueWithoutLabel);

  let options = {
    physics: {
      hierarchicalRepulsion: {
        centralGravity: 0,
        avoidOverlap: 0,
      },
      minVelocity: 0.75,
      solver: "hierarchicalRepulsion",
    },
    nodes: {
      borderWidth: 0,
      borderWidthSelected: 0,

      // widthConstraint: 800,
      // heightConstraint: 400,
      margin: 20,
      shape: "box",
      // levelSeparation: 300,
      //   fixed: true,
      //   physics: false,

      color: {
        border: "#000000e8",
        background: "#000000e8",
      },

      shadow: true,
      font: {
        color: "#fefefe",
      },
    },

    edges: {
      smooth: {
        forceDirection: "none",
      },
      color: "lightgray",
    },
    layout: {
      hierarchical: {
        enabled: true,
        // levelSeparation: 1000,
        // direction: "DU", // UD, DU, LR, RL
        // sortMethod: "directed", // hubsize, directed
        // nodeSpacing: 600,
        // treeSpacing: 600,
        // blockShifting: false,
        // edgeMinimization: false,
        // parentCentralization: false,
        // shakeTowards: "leaves", // roots, leaves
      },
    },
  };

  // create a network
  var container = document.getElementById("mynetwork");
  var data = {
    nodes: nodes,
    edges: edges,
  };
  var network = new vis.Network(container, data, options);
</script>
